{"version":3,"file":"exchnage-rate.js","sourceRoot":"","sources":["../../../src/components/exchangeRate/exchnage-rate.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Element, State, Event, EventEmitter, Listen } from '@stencil/core';\nimport { getExchangesRate } from '../../utils/fetchExchangeHandler';\n@Component({\n  tag: 'exchange-rate',\n  styleUrl: './exchange-rate.scss',\n  shadow: true,\n})\nexport class StockFinder {\n  pairCoinNameInput: HTMLInputElement;\n  names = [1, 2, 3, 4, 5];\n  @State() currencyInputValue: string;\n  @State() rates: Map<string, any> = new Map([]);\n  @State() error: boolean = false;\n  @State() currency: string;\n  @State() receivedEmit: string = 'false';\n  @State() loading: boolean = false;\n  @Element() el: HTMLElement;\n  @Event({ bubbles: true, composed: true }) emittedSymbol: EventEmitter<string>;\n\n  addRates(rates) {\n    this.rates.clear();\n    console.log('rates', this.rates);\n    const listOfRates = Object.entries(rates);\n    for (const [key, value] of listOfRates) {\n      this.rates.set(key, value);\n    }\n  }\n  async onSubmitForm(e: Event) {\n    console.log('Event', e);\n    e.preventDefault();\n\n    try {\n      console.log('input value', this.pairCoinNameInput.value);\n      this.loading = true;\n      const response = await getExchangesRate(this.pairCoinNameInput.value);\n      const res: any = await response;\n      if (res.code === 'ERR_NETWORK') {\n        this.error = true;\n        this.loading = false;\n        return;\n      }\n      const dataObj = res.data;\n      this.currency = res.data.data.currency;\n      const { rates } = dataObj.data;\n\n      this.addRates(rates);\n\n      console.log('rates map', this.rates);\n    } catch (e) {\n      this.loading = false;\n    } finally {\n      this.loading = false;\n    }\n  }\n\n  hostData() {\n    if (this.error) {\n      return { class: 'error' };\n    }\n  }\n  @Listen('emittedEvent', { target: 'body' })\n  prinMessage(event: CustomEvent) {\n    console.log('Event', event);\n    if (event.detail && event.detail === 'true') {\n      this.receivedEmit = event.detail;\n    }\n  }\n  onEmitSymbol(symbol: string) {\n    console.log('selected symbol', symbol);\n    this.emittedSymbol.emit(symbol);\n  }\n  render() {\n    let className;\n    let exchangeRatesWrapper = <div>Please enter your currency</div>;\n    let btnText = 'Find Exchange rates';\n\n    if (this.loading) {\n      exchangeRatesWrapper = <custom-spinner></custom-spinner>;\n    }\n    if (this.error) {\n      className = 'error';\n    } else {\n      className = null;\n    }\n    if (this.rates.size > 0 && !this.loading) {\n      exchangeRatesWrapper = (\n        <ul>\n          {Array.from(this.rates.keys()).map((key: string) => {\n            return (\n              <li onClick={this.onEmitSymbol.bind(this, key)} key={key}>\n                <p>{key}</p>\n                <p>{Math.floor(Number(this.rates.get(key)))}</p>\n              </li>\n            );\n          })}\n          ;\n        </ul>\n      );\n    }\n    return [\n      <div class=\"wrapper\">\n        <form class=\"form-container\" onSubmit={this.onSubmitForm.bind(this)}>\n          <div class=\"field\">\n            <input class={className} value={this.currencyInputValue} ref={el => (this.pairCoinNameInput = el)} placeholder=\"pair coin\" />\n          </div>\n          <div class=\"field\">\n            <button disabled={this.loading} type=\"submit\">\n              {btnText}\n            </button>\n          </div>\n        </form>\n        <div class=\"list-container\">{exchangeRatesWrapper}</div>\n      </div>,\n    ];\n  }\n}\n"]}